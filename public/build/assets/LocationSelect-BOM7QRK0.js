import{r as s,j as t}from"./app-Bv6tgZYX.js";import{o as C,C as O}from"./dropdown-menu-dPj9X2os.js";import{a as q}from"./app-layout-DlET80nE.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],M=C("Search",I);function x(...c){return c.filter(Boolean).join(" ")}function z({options:c,value:y,onChange:p,placeholder:S="Select a location",disabled:v=!1,showSearch:E=!0,className:L,label:j,optional:D=!1}){var N;const[l,d]=s.useState(!1),[b,u]=s.useState(""),g=s.useRef(null),m=s.useRef(null),R=s.useRef(null),[o,f]=s.useState(0),n=b.trim()===""?c:c.filter(e=>e.name.toLowerCase().includes(b.toLowerCase()));s.useEffect(()=>{o>=n.length&&f(0)},[n.length,o]),s.useEffect(()=>{const e=r=>{g.current&&(g.current.contains(r.target)||(d(!1),u("")))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),s.useEffect(()=>{if(!l)return;const e=r=>{var i,h;if(r.key==="Escape"&&(d(!1),u(""),(i=m.current)==null||i.focus()),r.key==="ArrowDown"&&(r.preventDefault(),f(a=>(a+1)%n.length)),r.key==="ArrowUp"&&(r.preventDefault(),f(a=>(a-1+n.length)%n.length)),r.key==="Enter"){r.preventDefault();const a=n[o];a&&(p(a.id.toString()),d(!1),u(""),(h=m.current)==null||h.focus())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,n,o,p]);const w=c.find(e=>e.id.toString()===y.toString());return t.jsxs("div",{ref:g,className:x("relative",L),children:[j&&t.jsxs("label",{className:"block text-sm font-medium text-white mb-1 select-none",children:[j," ",D&&t.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),t.jsxs("button",{ref:m,type:"button",disabled:v,"aria-haspopup":"listbox","aria-expanded":l,onClick:()=>d(e=>!e),className:x("w-full flex items-center justify-between rounded-md px-4 py-3 text-sm transition-all","bg-black/30 border border-white/15 backdrop-blur-sm text-white","hover:border-red-700/40 focus:outline-none focus:ring-2 focus:ring-red-700/50",v&&"opacity-50 cursor-not-allowed"),children:[t.jsx("span",{className:x("truncate",!w&&"text-gray-400"),children:w?w.name:S}),t.jsx(O,{className:x("h-4 w-4 transition-transform",l&&"rotate-180")})]}),l&&t.jsxs("div",{className:"absolute z-50 mt-2 w-full rounded-lg border border-white/10 bg-black/80 backdrop-blur-xl shadow-2xl ring-1 ring-black/5 animate-in fade-in slide-in-from-top-1",children:[E&&t.jsxs("div",{className:"p-2 border-b border-white/10 flex items-center gap-2",children:[t.jsx(M,{className:"h-4 w-4 text-gray-400"}),t.jsx("input",{autoFocus:!0,value:b,onChange:e=>{u(e.target.value),f(0)},placeholder:"Search locations...",className:"w-full bg-transparent focus:outline-none text-sm text-white placeholder-gray-500"})]}),t.jsxs("ul",{ref:R,role:"listbox","aria-activedescendant":(N=n[o])==null?void 0:N.id.toString(),className:"max-h-64 overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-red-700/40",children:[n.length===0&&t.jsx("li",{className:"px-4 py-3 text-xs text-gray-400 select-none",children:"No matches"}),n.map((e,r)=>{const i=y.toString()===e.id.toString(),h=r===o,a=/head office/i.test(e.name)||e.slug==="head-office";return t.jsxs("li",{id:e.id.toString(),role:"option","aria-selected":i,onMouseEnter:()=>f(r),onMouseDown:A=>{var k;A.preventDefault(),p(e.id.toString()),d(!1),u(""),(k=m.current)==null||k.focus()},className:x("px-4 py-2.5 text-sm flex items-center gap-2 cursor-pointer select-none transition-colors","border-b border-white/5 last:border-b-0",h?"bg-red-700/30 text-white":"text-gray-200 hover:bg-white/5",i&&"bg-red-700/50 text-white font-semibold"),children:[t.jsx(q,{className:"h-4 w-4 text-red-600"}),t.jsx("span",{className:"truncate flex-1",children:e.name}),a&&t.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-gradient-to-r from-red-700 to-red-800 text-white px-2 py-0.5 rounded-full border border-red-700/30",children:"HQ"}),i&&t.jsx("span",{className:"text-[10px] uppercase tracking-wide text-red-500",children:"Selected"})]},e.id)})]})]})]})}export{z as L};
